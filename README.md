# ActiveMQ Easy Config

This project intend to create a easy way to generate the `activemq.xml` in order 
to get running a network of brokers. You can use the generated xml in your existing 
installation or you can use the docker image generated by this script. 

# How it works?

First you have to define the `yaml` file with the configuration of your network:

```yaml
brokers:
  node1: "static:(tcp://node1:61616)"
  node2: "static:(tcp://node2:61616)"

networks:
  common_configuration:
    conduit_subscriptions: "true"
    consumer_ttl: "1"
    duplex: "true"
    message_ttl: "-1"
    physical_name: ">"
    user_name: "admin"

  network_connector:
    node1:
      to:
        - node2
    node2:
      to:
        - node1
``` 

If you intend to use docker, the address can be the broker name. 

In the directory `templates` you have a several other examples of network and the 
`activemq.xml` used as base

After create your template you can just run:

```bash
python aec.py \
    --config templates/simple-duplex-config.yaml \
    --xml templates/activemq.xml \
    --save-to /my/path/project
```

And you get as result:

```bash
build.sh
Dockerfile
node1.xml
node2.xml
run.sh
```

If can run `build.sh` to build the docker images and `run.sh` to run the containers in your local machine. 

This docker image can easily adapted to run on Kubernetes, Docker Swarm or ECS.

In the folder `check` you can run a simple producer/consumer to check the communication.  

# To Do

Help here is appreciate :)

- This configuration can be expanded to other features on ActiveMQ.
- Example of configuration with `failover:` and `masterslave:`
- Example with `ssl:`
- K8s implementation
- Docker swarm implementation
- ECS implementation 
